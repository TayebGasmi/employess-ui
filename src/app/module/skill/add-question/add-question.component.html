<p-button label="Add Question" icon="pi pi-plus" (onClick)="alterShow()" class="p-button-outlined my-1"></p-button>
<ng-container *ngIf="show">
  <form (ngSubmit)="submit()" [formGroup]="questionForm">
    <ng-container formGroupName="questionDto" >
     <div class="p-fluid mt-1" >

       <div class="field">
         <label for="questionText" class="mt-1" >Question Text:</label>
         <input id="questionText" pInputText [ngClass]="{'ng-invalid ng-dirty mr-2': showFieldErrors('questionText')}"
                formControlName="questionText" type="text" >
       </div>
       <div *ngIf="showFieldErrors('questionText')" class="text-base text-red-500 mt-1">Question text is required.</div>
       <!-- Description -->
       <div class="field">
         <label for="responseDescription" class="mt-1">Description:</label>
         <textarea id="responseDescription" pInputTextarea [ngClass]="{'ng-invalid ng-dirty mr-2': showFieldErrors('responseDescription')}"
                   formControlName="responseDescription" ></textarea>
       </div>
       <div *ngIf="showFieldErrors('responseDescription')" class="text-base text-red-500 mt-1">Response description is required.</div>
     </div>

    </ng-container>

    <div class="flex justify-content-between">
      <!-- Add Option Button -->
      <p-button (onClick)="addOption($event)" label="Add Option" icon="pi pi-plus" class="p-button-outlined p-button-success"></p-button>

      <!-- Clear Options Button (with ngIf) -->
      <p-button *ngIf="optionsArray.length > 0" (onClick)="clearOptions()" label="Clear Options" icon="pi pi-trash" class="p-button-outlined p-button-danger"></p-button>

    </div>
    <div class="p-fluid">
      <ng-container *ngIf="optionsArray.length > 0">
        <p-divider [align]="'center'">
          options
        </p-divider>
        <ng-container formArrayName="options">
          <div class="grid">
            <div *ngFor="let option of optionsArray.controls ; let i = index" class="col-12">
              <div [formGroupName]="i">
                <div class="p-fluid">
                  <div class="field">
                    <div class="flex justify-content-between align-items-center " *ngFor="let item of items; let i = index">
                      <div class="flex justify-content-start">
                        <h5 class="mx-1"> option {{ i+1 }} :</h5> <div class="grid">
                        <p-toggleButton class="mx-3 mt-1" formControlName="correct" onLabel="Yes" offLabel="No"></p-toggleButton>
                      </div>

                    </div>
                      <div>
                        <button pButton type="button" icon="pi pi-ellipsis-v" class="p-button-rounded p-button-text p-button-plain" (click)="toggleMenu($event, i)"></button>
                        <p-menu #menu [popup]="true" [model]="items"></p-menu>
                      </div>
                    </div>
                    <textarea pInputTextarea [ngClass]="{'ng-invalid ng-dirty mr-2': showOptionErrors('optionText',i)}"
                               formControlName="optionText"
                              >
                    </textarea>
                    <div *ngIf="showOptionErrors('optionText',i)" class="text-base text-red-500 mt-1" >Option text is required.</div>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </ng-container>
      </ng-container>
    </div>
    <div class="flex justify-content-between mt-1" >
      <!-- Cancel Button -->
      <p-button (onClick)="resetForm()" label="Cancel" icon="pi pi-x" class="p-button-outlined p-button-danger"
                type="button">
      </p-button>

      <!-- Save Button -->
      <p-button label="Save" icon="pi pi-check" class="p-button-outlined p-button-success" type="submit">
      </p-button>
    </div>
  </form>

</ng-container>
